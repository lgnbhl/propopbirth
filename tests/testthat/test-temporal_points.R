test_that("snapshot test for temporal_points()", {
  
  # Prepare input ----
  input_data <- tibble::tibble(
    spatial_unit = rep("Aarau", 26L),
    nat = rep(c("ch", "int"), each = 13L),
    year = rep(seq(2011, 2023, by = 1), 2),
    y = c(
      1.3317180993542383, 1.2905418882383055, 1.3109546955687157, 1.111916627253612,
      1.30666869372653, 1.5624560873216693, 1.1577805428762786, 1.1259319259132576,
      1.2422815308477662, 1.1988829661921492, 1.2442585827987873,
      1.1661266463168989, 1.0121007626628005, 1.9372076690835396, 1.755635500403377,
      1.5330832216352193, 2.600794521482836, 1.8576157827302706, 1.894356294917059,
      2.3848535073420325, 1.990104826882635, 1.6125283802807857, 1.9003827175532302,
      1.9986812756844305, 1.8652936716833775, 1.8814830581283348
    ),
  )
  
  trend_data <- tibble::tibble(
    spatial_unit = rep("Aarau", 64L),
    nat = rep(c("ch", "int"), 32),
    year = rep(2024:2055, each = 2L),
    y = c(
      1.0626711034546368, 1.8164377201298083, 1.0563376597424483,
      1.7919094922255965, 1.0500042160302598, 1.7673812643213846,
      1.0436707723180714, 1.7428530364171726, 1.0373373286058847,
      1.7183248085129625, 1.0310038848936962, 1.6937965806087507,
      1.0246704411815077, 1.6692683527045387, 1.0183369974693193,
      1.6447401248003268, 1.0120035537571326, 1.6202118968961168, 1.005670110044944,
      1.5956836689919047, 0.9993366663327555, 1.571155441087693, 0.9930032226205671,
      1.546627213183481, 0.9866697789083786, 1.522098985279269, 0.9803363351961919,
      1.497570757375059, 0.9740028914840034, 1.4730425294708471, 0.967669447771815,
      1.448514301566635, 0.9613360040596265, 1.4239860736624235, 0.955002560347438,
      1.3994578457582114, 0.9486691166352513, 1.3749296178540014,
      0.9423356729230629, 1.3504013899497895, 0.9360022292108744,
      1.3258731620455775, 0.9296687854986859, 1.3013449341413657,
      0.9233353417864992, 1.2768167062371556, 0.9170018980743108,
      1.2522884783329435, 0.9106684543621223, 1.2277602504287317,
      0.9043350106499338, 1.2032320225245199, 0.8980015669377454,
      1.1787037946203078, 0.8916681232255587, 1.1541755667160978,
      0.8853346795133702, 1.129647338811886, 0.8790012358011817, 1.105119110907674,
      0.8726677920889933, 1.080590883003462, 0.8663343483768066, 1.056062655099252
    ),
    category = rep("lm", 64L),
  )
  
  expect_snapshot(constructive::construct(
    temporal_points(
      input_past = input_data,
      input_trend = trend_data,
      year_start = 2027,
      year_end = 2055,
      trend_prop = 0.8,
      z0_prop = 0.7,
      z1_prop = 0
    )
  ))
})
