<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>TFR and MAB forecast • propopbirth</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="TFR and MAB forecast">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">propopbirth</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/forecast_fertility_rate.html">Fertility rate forecast</a></li>
    <li><a class="dropdown-item" href="../articles/forecast_tfr_mab.html">TFR and MAB forecast</a></li>
    <li><a class="dropdown-item" href="../articles/prepare_data.html">Prepare input data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>TFR and MAB forecast</h1>
            
      

      <div class="d-none name"><code>forecast_tfr_mab.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>After the input data preparation, forecasts for <strong>TFR (total
fertility rate)</strong> and <strong>MAB (mean age of the mother at
birth)</strong> are calculated. In general, the FSO uses the
<strong>same model structure</strong> for both forecasts. However,
different model types and parameters can be used for the TFR and MAB
forecast.</p>
<p>The FSO model for TFR and MAB consists of three time periods</p>
<ul>
<li>
<strong>trend</strong> period: in the FSO model usually a few years
(one to five years)</li>
<li>
<strong>temporal</strong> period: the majority of forecast period
(FSO: approximately until 2055)</li>
<li>
<strong>constant</strong> period: end of the forecast (FSO: from
2056 until 2075)</li>
</ul>
<div class="figure">
<img src="figures/time_periods.png" class="r-plt" alt="The FSO model for TFR and MAB consists of three time periods.  First, the trend period: In the FSO model this usually covers  one to five years. Second, the temporal period: This is the  majority of forecast period. Third, the constant period;  this part covers end of the forecast." width="70%"><p class="caption">
time periods
</p>
</div>
</div>
<div class="section level2">
<h2 id="trend-period">Trend period<a class="anchor" aria-label="anchor" href="#trend-period"></a>
</h2>
<p>In the original FSO model, for the trend model an <strong>ARIMA
model</strong> is used for the trend period. Depending on the structure
of the past TFR and MAB data, the ARIMA forecast is not always stable.
Therefore, in <a href="https://statistik-aargau.github.io/propopbirth_test/">propopbirth</a> a <strong>linear model</strong>
can be used as an alternative to the ARIMA model.</p>
<p>If an <code>lm</code> model is used, the window of past years
(<code>trend_past</code>) and the proportional amount of past years used
to fit the model (<code>trend_prop</code>) can be specified.This allows
for weighted or selective emphasis on recent data when calculating the
trend, which can be useful if trends are expected to change over time or
if older data is considered less relevant.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="4%">
<col width="32%">
<col width="62%">
</colgroup>
<thead><tr class="header">
<th>module</th>
<th>description</th>
<th>values required</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>ARIMA</td>
<td>ARIMA model. The auto.arima function is used: auto.arima(x, d = 2,
max.p = 3, max.q = 3)</td>
<td><ul>
<li><p><code>topic</code>: “TFR” or “MAB”</p></li>
<li><p><code>input_dataset</code>: input$tfr or input$mab</p></li>
<li><p><code>trend_model</code>: “ARIMA”</p></li>
<li><p><code>year_begin</code>: first year of ARIMA forecast</p></li>
<li><p><code>year_end</code>: last year of ARIMA forecast</p></li>
<li><p><code>trend_prop</code>: proportion of the ARIMA forecast used.
Number from 0 to 1 (1 = ARIMA prediction, 0 = last data value, 0.5 =
mean of ARIMA prediction and last data value)</p></li>
</ul></td>
</tr>
<tr class="even">
<td>lm</td>
<td>linear model (lm function)</td>
<td><ul>
<li><p><code>topic</code>: “TFR” or “MAB”</p></li>
<li><p><code>input_dataset</code>: input$tfr or input$mab</p></li>
<li><p><code>trend_model</code>: “lm”</p></li>
<li><p><code>year_begin</code>: first year of linear model
forecast</p></li>
<li><p><code>year_end</code>: last year of linear model
forecast</p></li>
<li><p><code>trend_past</code>: how many past years are used to fit the
model?</p></li>
<li><p><code>trend_prop</code>: proportion of the ARIMA forecast used.
Number from 0 to 1 (1 = ARIMA prediction, 0 = last data value, 0.5 =
mean of ARIMA prediction and last data value)</p></li>
</ul></td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="temporal-period">Temporal period<a class="anchor" aria-label="anchor" href="#temporal-period"></a>
</h2>
<p>In general, the FSO uses <strong>given values</strong> for TFR and
MAB at the end of the temporal period. These target points are more or
less subjectively determined by the cantons. For the cantonal forecasts
this is manageable. However, this is often not possible or meaningful
(e.g. forecasts for many municipalities or other spatial units).
Therefore, we provide in <a href="https://statistik-aargau.github.io/propopbirth_test/">propopbirth</a> an additional
<strong>data-driven approach</strong>. In this approach, the target
points of the temporal period (point C in the figure below) are derived
using the trend period model. A parameter determines, how much of the
trend model is used to calculate the target point C. Example: A
parameter of 0.7 means: 70 % of the trend is projected to the future to
determine point C.</p>
<div class="figure">
<img src="figures/point_C.png" class="r-plt" alt="The propopbirth package provides an additional data-driven approach  to determine the end point of the temporal period. For this calculation,  the previous trend period model is used again. A parameter determines  the percentage of trend which is used to calculate the target point." width="50%"><p class="caption">
target point with data driven approach
</p>
</div>
<p>For the temporal period both approaches are possible</p>
<ul>
<li><p><strong>given values</strong>: a table with target values has to
be provided (for each group, e.g. spatial unit and
nationality).</p></li>
<li><p><strong>data-driven approach</strong>: the proportion of trend
has to be selected (parameter e.g. 0.7)</p></li>
</ul>
<p>The FSO uses three alternative modules for the temporal period:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="2%">
<col width="20%">
<col width="76%">
</colgroup>
<thead><tr class="header">
<th>module</th>
<th>description</th>
<th>values required</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>cubic</td>
<td>Interpolation from the start to the target point of the temporal
period with a third-degree polynomial</td>
<td><ul>
<li><p><code>temporal_model</code>: “cubic”</p></li>
<li><p><code>year_begin</code>: first year of the cubic
forecast</p></li>
<li><p><code>year_end</code>: last year of the cubic forecast</p></li>
<li><p><code>trend_prop</code>: proportion of trend to derive the target
point; this has to be specified for the <strong>data driven
approach</strong></p></li>
<li><p><code>temporal_end</code>: given target points; has to be
specified if <strong>given values</strong> for the end of the temporal
period are used</p></li>
<li><p><code>z0_prop</code>: the Bézier function uses the <strong>slope
at the starting point</strong> of the temporal period. This is
calculated from the trend period model. The parameter
<code>z0_prop</code> is the proportion of the calculated slope that is
used as slope of the curve at the starting point. This parameter is
responsible for the curve shape at the <strong>transition between the
trend and the temporal period</strong>.</p></li>
<li><p>z1_prop: the Bézier function also uses the <strong>slope at the
end point</strong> of the temporal period. The parameter
<code>z1_prop</code> is the proportion of the previously calculated
slope (according to the trend model) that is used as slope of the curve
at the end point. This parameter is responsible for the curve shape at
the <strong>transition between the temporal and the constant
period</strong>.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Bézier</td>
<td>Interpolation from the start to the target point of the temporal
period with a Bézier-curve</td>
<td><ul>
<li><p><code>temporal_model</code>: “Bezier”</p></li>
<li><p><code>year_begin</code>: first year of the Bézier
forecast</p></li>
<li><p><code>year_end</code>: last year of the Bézier forecast</p></li>
<li><p><code>trend_prop</code>: proportion of trend to derive the target
point; has to be specified for the <strong>data driven
approach</strong></p></li>
<li><p><code>temporal_end</code>: given target points; has to be
specified if <strong>given values</strong> for the end of the temporal
period are used</p></li>
<li><p><code>z0_prop</code>: proportion of the <strong>slope at the
starting point</strong> (same as for the cubic module)</p></li>
<li><p>z1_prop: proportion of the <strong>slope at the end
point</strong> (same as for the cubic module)</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>constant</td>
<td>The last value of the trend period is used for the temporal
period</td>
<td><ul>
<li><p><code>temporal_model</code>: “constant”</p></li>
<li><p><code>year_begin</code>: first year of cubic forecast</p></li>
<li><p><code>year_end</code>: last year of cubic forecast</p></li>
</ul></td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="constant-period">Constant period<a class="anchor" aria-label="anchor" href="#constant-period"></a>
</h2>
<p>For the last section of the TFR and MAB forecast the FSO uses a
constant model.</p>
<table style="width:99%;" class="table">
<colgroup>
<col width="10%">
<col width="53%">
<col width="35%">
</colgroup>
<thead><tr class="header">
<th>module</th>
<th>description</th>
<th>values required</th>
</tr></thead>
<tbody><tr class="odd">
<td>constant</td>
<td>The last value of the temporal period is used for the constant
period</td>
<td><ul>
<li><p><code>constant_model</code>: “constant”</p></li>
<li><p><code>year_begin</code>: first year of the forecast</p></li>
<li><p><code>year_end</code>: last year of the forecast</p></li>
</ul></td>
</tr></tbody>
</table>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="create-input-data">Create input data<a class="anchor" aria-label="anchor" href="#create-input-data"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://statistik-aargau.github.io/propopbirth_test/">propopbirth</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load package data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fso_pop"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fso_birth"</span><span class="op">)</span></span></code></pre></div>
<p>Create input data</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_input_data.html">create_input_data</a></span><span class="op">(</span></span>
<span>  population <span class="op">=</span> <span class="va">fso_pop</span>,</span>
<span>  births <span class="op">=</span> <span class="va">fso_birth</span>,</span>
<span>  year_first <span class="op">=</span> <span class="fl">2011</span>,</span>
<span>  year_last <span class="op">=</span> <span class="fl">2023</span>,</span>
<span>  age_fert_min <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  age_fert_max <span class="op">=</span> <span class="fl">49</span>,</span>
<span>  fert_hist_years <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  binational <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-1">Example 1<a class="anchor" aria-label="anchor" href="#example-1"></a>
</h3>
<ul>
<li><p>topic: <strong>TFR forecast</strong></p></li>
<li><p>approach: <strong>given target points</strong></p></li>
<li><p>trend model: <strong>linear</strong></p></li>
<li><p>temporal model: <strong>cubic</strong></p></li>
</ul>
<p>Given target points (subjectively selected values)</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">temporal_end_tfr</span> <span class="op">&lt;-</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand_grid.html" class="external-link">expand_grid</a></span><span class="op">(</span></span>
<span>  spatial_unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Aarau"</span>, <span class="st">"Frauenfeld"</span>, <span class="st">"Stadt Zürich"</span><span class="op">)</span>, </span>
<span>  nat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ch"</span>, <span class="st">"int"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>y_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.5</span>, <span class="fl">0.8</span>, <span class="fl">2.0</span>, <span class="fl">0.9</span>, <span class="fl">0.9</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>TFR forecast</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">forecast_tfr_example1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/forecast_tfr_mab.html">forecast_tfr_mab</a></span><span class="op">(</span></span>
<span>  topic <span class="op">=</span> <span class="st">"tfr"</span>, </span>
<span>  topic_data <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">tfr</span>,</span>
<span>  trend_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="st">"lm"</span>, start <span class="op">=</span> <span class="fl">2024</span>, end <span class="op">=</span> <span class="fl">2026</span>, trend_past <span class="op">=</span> <span class="fl">7</span>, trend_prop <span class="op">=</span> <span class="fl">0.5</span></span>
<span>  <span class="op">)</span>,</span>
<span>  temporal_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="st">"cubic"</span>, start <span class="op">=</span> <span class="fl">2027</span>, end <span class="op">=</span> <span class="fl">2055</span>, trend_prop <span class="op">=</span> <span class="fl">0.8</span>, z0_prop <span class="op">=</span> <span class="fl">0.7</span>, </span>
<span>    z1_prop <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span>,</span>
<span>  temporal_end <span class="op">=</span> <span class="va">temporal_end_tfr</span>,</span>
<span>  constant_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"constant"</span>, start <span class="op">=</span> <span class="fl">2056</span>, end <span class="op">=</span> <span class="fl">2075</span><span class="op">)</span></span>
<span><span class="op">)</span> </span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">forecast_tfr_example1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">tfr</span>, color <span class="op">=</span> <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">tfr</span>, color <span class="op">=</span> <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">nat</span> <span class="op">~</span> <span class="va">spatial_unit</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="forecast_tfr_mab_files/figure-html/unnamed-chunk-5-1.png" class="r-plt" width="672"></p>
</div>
<div class="section level3">
<h3 id="example-2">Example 2<a class="anchor" aria-label="anchor" href="#example-2"></a>
</h3>
<ul>
<li><p>topic: <strong>TFR forecast</strong></p></li>
<li><p>approach: <strong>data-driven</strong></p></li>
<li><p>trend model: <strong>ARIMA</strong></p></li>
<li><p>temporal model: <strong>Bézier</strong></p></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">forecast_tfr_example2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/forecast_tfr_mab.html">forecast_tfr_mab</a></span><span class="op">(</span></span>
<span>  topic <span class="op">=</span> <span class="st">"tfr"</span>, </span>
<span>  topic_data <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">tfr</span>,</span>
<span>  trend_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="st">"ARIMA"</span>, start <span class="op">=</span> <span class="fl">2024</span>, end <span class="op">=</span> <span class="fl">2026</span>, trend_past <span class="op">=</span> <span class="fl">7</span>, trend_prop <span class="op">=</span> <span class="fl">0.5</span></span>
<span>  <span class="op">)</span>,</span>
<span>  temporal_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="st">"Bezier"</span>, start <span class="op">=</span> <span class="fl">2027</span>, end <span class="op">=</span> <span class="fl">2055</span>, trend_prop <span class="op">=</span> <span class="fl">0.8</span>, z0_prop <span class="op">=</span> <span class="fl">0.7</span>, </span>
<span>    z1_prop <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span>,</span>
<span>  temporal_end <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  constant_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"constant"</span>, start <span class="op">=</span> <span class="fl">2056</span>, end <span class="op">=</span> <span class="fl">2075</span><span class="op">)</span></span>
<span>  <span class="op">)</span> </span>
<span><span class="co">#&gt; Registered S3 method overwritten by 'quantmod':</span></span>
<span><span class="co">#&gt;   method            from</span></span>
<span><span class="co">#&gt;   as.zoo.data.frame zoo</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">forecast_tfr_example2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">tfr</span>, color <span class="op">=</span> <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">tfr</span>, color <span class="op">=</span> <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">nat</span> <span class="op">~</span> <span class="va">spatial_unit</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="forecast_tfr_mab_files/figure-html/unnamed-chunk-7-1.png" class="r-plt" width="672"></p>
</div>
<div class="section level3">
<h3 id="example-3">Example 3<a class="anchor" aria-label="anchor" href="#example-3"></a>
</h3>
<ul>
<li><p>topic: <strong>MAB forecast</strong></p></li>
<li><p>approach: <strong>data-driven</strong></p></li>
<li><p>trend model: <strong>linear</strong></p></li>
<li><p>temporal model: <strong>Bézier</strong></p></li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">forecast_tfr_example3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/forecast_tfr_mab.html">forecast_tfr_mab</a></span><span class="op">(</span></span>
<span>  topic <span class="op">=</span> <span class="st">"mab"</span>, </span>
<span>  topic_data <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">mab</span>,</span>
<span>  trend_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="st">"lm"</span>, start <span class="op">=</span> <span class="fl">2024</span>, end <span class="op">=</span> <span class="fl">2026</span>, trend_past <span class="op">=</span> <span class="fl">7</span>, trend_prop <span class="op">=</span> <span class="fl">0.5</span></span>
<span>  <span class="op">)</span>,</span>
<span>  temporal_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="st">"Bezier"</span>, start <span class="op">=</span> <span class="fl">2027</span>, end <span class="op">=</span> <span class="fl">2055</span>, trend_prop <span class="op">=</span> <span class="fl">0.3</span>, z0_prop <span class="op">=</span> <span class="fl">0.7</span>, </span>
<span>    z1_prop <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span>,</span>
<span>  temporal_end <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  constant_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"constant"</span>, start <span class="op">=</span> <span class="fl">2056</span>, end <span class="op">=</span> <span class="fl">2075</span><span class="op">)</span></span>
<span><span class="op">)</span> </span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">forecast_tfr_example3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">mab</span>, color <span class="op">=</span> <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">mab</span>, color <span class="op">=</span> <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">nat</span> <span class="op">~</span> <span class="va">spatial_unit</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="forecast_tfr_mab_files/figure-html/unnamed-chunk-9-1.png" class="r-plt" width="672"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Klemens Rosin, Felix Lorenz, Norah Efosa.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
